(function(e){function t(t){for(var o,r,n=t[0],c=t[1],s=t[2],m=0,u=[];m<n.length;m++)r=n[m],Object.prototype.hasOwnProperty.call(l,r)&&l[r]&&u.push(l[r][0]),l[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(t);while(u.length)u.shift()();return i.push.apply(i,s||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],o=!0,n=1;n<a.length;n++){var c=a[n];0!==l[c]&&(o=!1)}o&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var o={},l={app:0},i=[];function r(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=o,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var s=0;s<n.length;s++)t(n[s]);var d=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var o=a("2b0e"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body"},[e._m(0),a("div",{staticStyle:{position:"fixed",top:"50px",right:"50px"}},[a("button",{on:{click:function(t){return e.back()}}},[e._v("返回上级")])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"echarts"},[a("div",{attrs:{id:"map"}})])}],r=(a("ac6a"),a("7f7f"),a("386d"),a("1157")),n=a.n(r),c={name:"demo",data:function(){return{cityName:"中国",areaCode:1e4,geoJsonData:"",echartsMap:null,district:null,cityCode:1e5,opts:{},mapData:[],accountData:[],oldPrevData:[1e5],levelPieces:{default:{province:[{min:0,max:0,label:"0",color:"#DCDCDC"},{min:1,max:50,label:"1-50",color:"#CDC673"},{min:51,max:200,label:"51-200",color:"#CD9B1D"},{min:201,max:500,label:"201-500",color:"#FFD700"},{min:501,max:1e3,label:"501-1000",color:"#d08a00"},{min:1001,max:3e3,label:"1001-3000",color:"#8B4513"},{min:3001,label:"3000以上",color:"#8B1A1A"}],city:[{min:0,max:0,label:"0",color:"#DCDCDC"},{min:1,max:50,label:"1-50",color:"#d08a00"},{min:51,max:100,label:"51-100",color:"#CD9B1D"},{min:101,max:200,label:"101-200",color:"#FFD700"},{min:201,max:300,label:"201-300",color:"#d08a00"},{min:301,max:400,label:"301-500",color:"#8B4513"},{min:401,label:"400以上",color:"#8B1A1A"}],district:[{min:0,max:0,label:"0",color:"#DCDCDC"},{min:1,max:10,label:"1-10",color:"#d08a00"},{min:11,max:20,label:"11-20",color:"#CD9B1D"},{min:21,max:30,label:"21-30",color:"#FFD700"},{min:31,max:40,label:"31-40",color:"#d08a00"},{min:41,max:50,label:"41-50",color:"#8B4513"},{min:51,label:"50以上",color:"#8B1A1A"}]},height:{province:[{min:0,max:0,label:"0",color:"#DCDCDC"},{min:1,max:50,label:"1-50",color:"#CDC673"},{min:51,max:200,label:"51-200",color:"#CD9B1D"},{min:201,max:500,label:"201-500",color:"#FFD700"},{min:501,max:1e3,label:"501-1000",color:"#d08a00"},{min:1001,max:3e3,label:"1001-3000",color:"#8B4513"},{min:3001,label:"3000以上",color:"#8B1A1A"}],city:[{min:0,max:0,label:"0",color:"#DCDCDC"},{min:1,max:100,label:"1-100",color:"#d08a00"},{min:101,max:200,label:"100-200",color:"#CD9B1D"},{min:201,max:400,label:"201-400",color:"#FFD700"},{min:401,max:700,label:"401-700",color:"#d08a00"},{min:701,max:1e3,label:"701-1000",color:"#8B4513"},{min:1001,label:"1000以上",color:"#8B1A1A"}],district:[{min:0,max:0,label:"0",color:"#DCDCDC"},{min:1,max:10,label:"1-10",color:"#d08a00"},{min:11,max:20,label:"11-20",color:"#CD9B1D"},{min:21,max:30,label:"21-30",color:"#FFD700"},{min:31,max:40,label:"31-40",color:"#d08a00"},{min:41,max:50,label:"41-50",color:"#8B4513"},{min:51,label:"50以上",color:"#8B1A1A"}]}}}},mounted:function(){var e=this;this.getAccountData((function(){e.echartsMap=e.$echarts.init(document.getElementById("map")),e.echartsMap.on("click",e.echartsMapClick),e.opts={subdistrict:1,showbiz:!1},e.district=new AMap.DistrictSearch(e.opts),e.district.search("中国",(function(t,a){"complete"==t&&e.getData(a.districtList[0],"",1e5)}))}))},methods:{echartsMapClick:function(e,t){var a=this;console.log(e),this.$ba.trackEvent("echartsMap","点击地图","".concat(e.data.name,"-").concat(e.data.cityCode)),"street"!=e.data.level&&(t||this.oldPrevData.push(e),this.cityName=e.data.name,this.cityCode=e.data.cityCode,this.district.setLevel(e.data.level),this.district.setExtensions("all"),this.district.search(this.cityCode,(function(t,o){"complete"===t&&a.getData(o.districtList[0],e.data.level,a.cityCode)})))},loadMapData:function(e){var t=this;AMapUI.loadUI(["geo/DistrictExplorer"],(function(a){var o=window.districtExplorer=new a;o.loadAreaNode(e,(function(e,a){if(e)console.error(e);else{var o={};o.features=a.getSubFeatures(),t.loadMap(t.cityName,o),t.geoJsonData=o}}))}))},loadMap:function(e,t){if(t){this.$echarts.registerMap(e,t);var a=t.features[0].properties.level,o=this.levelPieces.default[a];console.log("properties",t.features[0].properties.adcode),[650100,130100].indexOf(t.features[0].properties.adcode)>-1&&(o=this.levelPieces.height[a]);var l={visualMap:{type:"piecewise",pieces:o,color:"#fff",textStyle:{color:"#fff"},visibility:"off"},series:[{name:"数据名称",type:"map",roam:!1,mapType:e,selectedMode:"single",showLegendSymbol:!1,visibility:"off",itemStyle:{normal:{color:"#ccc",areaColor:"#fff",borderColor:"#fff",borderWidth:.5,label:{show:!0,textStyle:{color:"rgb(249, 249, 249)"}}},emphasis:{areaColor:!1,borderColor:"#fff",areaStyle:{color:"#fff"},label:{show:!0,textStyle:{color:"rgb(249, 249, 249)"}}}},data:this.mapData}]};this.echartsMap.setOption(l)}},getData:function(e,t,a){console.log("accountData",this.accountData);var o=e.districtList;if(console.log(o),o){var l=o[0].level;if("province"===l){this.mapData=[];for(var i=0,r=o.length;i<r;i++){var n=o[i].name,c=o[i].adcode;this.mapData.push({name:n,value:this.getMapDataValue(o[i]),cityCode:c,level:l})}this.loadMapData(a)}else if("city"===l){this.mapData=[];for(i=0,r=o.length;i<r;i++){n=o[i].name,c=o[i].adcode;this.mapData.push({name:n,value:this.getMapDataValue(o[i]),cityCode:c,level:l})}this.loadMapData(a)}else if("district"===l){this.mapData=[];for(i=0,r=o.length;i<r;i++){n=o[i].name,c=o[i].adcode;this.mapData.push({name:n,value:this.getMapDataValue(o[i]),cityCode:c,level:l})}this.loadMapData(a)}}},getMapDataValue:function(e){var t=0,a=e.level,o=e.adcode;return this.accountData.forEach((function(e){"province"===a?String(o).substr(0,2)===String(e.locationCode).substr(0,2)&&(t+=e.count):"city"===a?String(o).substr(0,4)===String(e.locationCode).substr(0,4)&&(t+=e.count):"district"===a&&String(o).substr(0,6)===String(e.locationCode).substr(0,6)&&(t+=e.count)})),console.log("value",t),t},getAccountData:function(e){var t=this;n.a.get("./data.json",(function(a){console.log(a),t.accountData=a.data,e()}))},back:function(){var e=this;this.oldPrevData.length<=2?this.district.search("中国",(function(t,a){"complete"==t&&e.getData(a.districtList[0],"",1e5)})):(this.oldPrevData.pop(),this.echartsMapClick(this.oldPrevData.pop(),!0))}}},s=c,d=(a("f818"),a("2877")),m=Object(d["a"])(s,l,i,!1,null,"5c760e8a",null),u=m.exports,p=a("313e"),f=a.n(p),h=a("2e95"),b=a.n(h);o["a"].config.productionTip=!1,o["a"].prototype.$echarts=f.a,o["a"].use(b.a,"b0668f30d62e1597bdb36d05edea8960"),o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(u)}}).$mount("#app")},"9d1f":function(e,t,a){},f818:function(e,t,a){"use strict";var o=a("9d1f"),l=a.n(o);l.a}});
//# sourceMappingURL=app.02ffd168.js.map